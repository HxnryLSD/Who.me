<%- include('../partials/header') %>
<section class="public-profile">
  <header class="profile-header">
    <% if (profile && profile.avatar_path) { %>
      <img src="<%= profile.avatar_path %>" alt="avatar" style="width:96px; height:96px; border-radius:50%; object-fit:cover; border:1px solid #2a2e44;" />
    <% } %>
    <h1><%= (profile && profile.full_name) || username %></h1>
    <p class="muted">
      <% if (profile && profile.city) { %><span>🏙️ <%= profile.city %></span><% } %>
      <% if (profile && profile.workplace) { %> • <span>💼 <%= profile.workplace %></span><% } %>
      <% if (profile && profile.birthday) { %> • <span>🎂 <%= profile.birthday %></span><% } %>
    </p>
    <% if (profile && profile.bio) { %>
      <p><%= profile.bio %></p>
    <% } %>
  </header>

  <ul class="app-grid">
    <% links.forEach(link => { %>
      <li class="app-item">
        <% if (link.thumb_url) { %>
          <img class="favicon" src="<%= link.thumb_url %>" alt="" onerror="this.style.display='none'" />
        <% } else { %>
          <img class="favicon" src="https://icons.duckduckgo.com/ip3/<%= new URL(link.url).hostname %>.ico" alt="" onerror="this.style.display='none'" />
        <% } %>
        <div class="app-meta">
          <a class="app-label" href="/l/<%= link.id %>" target="_blank" rel="noopener noreferrer"><%= link.label %></a>
          <small class="muted"><%= link.url %></small>
        </div>
      </li>
    <% }) %>
  </ul>
</section>
<%- include('../partials/footer') %>
